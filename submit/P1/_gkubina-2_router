# Use the official FRRouting image
FROM frrouting/frr:latest

# Copy FRR config files into the container
COPY frr.conf /etc/frr/frr.conf
COPY daemons /etc/frr/daemons

# Set permissions (FRR runs as user frr)
RUN chown frr:frr /etc/frr/frr.conf /etc/frr/daemons

# Expose ports (BGP, OSPF, etc.) if needed
EXPOSE 179 2604 2605

# Start FRR and keep container alive for console access
CMD ["/bin/sh", "-c", "/usr/lib/frr/frrinit.sh start && exec /bin/sh"]